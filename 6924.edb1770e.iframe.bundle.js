"use strict";(self.webpackChunk_ticketswap_solar=self.webpackChunk_ticketswap_solar||[]).push([[6924],{"./src/components/Image/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Image_Image});var emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),theme=__webpack_require__("./src/theme/index.ts");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const fadeIn=emotion_react_browser_esm.F4`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`,Container=(0,emotion_styled_base_browser_esm.Z)("div",{target:"ek3z0ms2"})("position:relative;line-height:0;overflow:hidden;border-radius:",(props=>props.rounded?theme.q0.lg:0),";animation-duration:",theme.x9,"ms;animation-fill-mode:both;animation-name:",fadeIn,";backface-visibility:hidden;"),Placeholder=(0,emotion_styled_base_browser_esm.Z)("img",{target:"ek3z0ms1"})("vertical-align:middle;transition:opacity ",theme.eR,";background-color:",theme.$_.elevatedBackground,";opacity:",(props=>props.show?0:1),";inline-size:100%;block-size:100%;"),StyledImage=(0,emotion_styled_base_browser_esm.Z)("img",{target:"ek3z0ms0"})("inline-size:100%;block-size:100%;vertical-align:middle;transition:opacity ",theme.eR,";opacity:",(props=>props.show?1:0),";position:absolute;inset-inline-start:0;inset-block-start:0;object-fit:cover;");function placeholderSrc(width,height){return`data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${width} ${height}"%3E%3C/svg%3E`}const Image_Image=({src,lazyload=!0,width=1200,height=800,rounded=!1,alt,...props})=>{const[loaded,setLoaded]=(0,react.useState)(!1),[imageSrc,setImageSrc]=(0,react.useState)(placeholderSrc(width,height)),imageRef=(0,react.useRef)(null),observer=(0,react.useRef)(null),handleLoad=(0,react.useCallback)((async()=>{try{await function fetchImage(src,width,height){const image=new Image(width,height);return new Promise(((resolve,reject)=>{image.src=src,image.onload=resolve,image.onerror=reject}))}(src),setLoaded(!0),setImageSrc(src)}catch(error){setLoaded(!0),setImageSrc(placeholderSrc(width,height))}}),[height,src,width]),handleLazyLoad=(0,react.useCallback)((entries=>{entries&&entries.length&&entries[0].intersectionRatio>0&&null!==imageRef.current&&null!==observer.current&&(handleLoad(),observer.current.unobserve(imageRef.current))}),[handleLoad]),initObserver=(0,react.useCallback)((()=>{if(!lazyload)return!1;const config={root:null,rootMargin:"-10px",threshold:.01};"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&null!==imageRef.current?(observer.current=new IntersectionObserver(handleLazyLoad,config),observer.current.observe(imageRef.current)):handleLoad()}),[handleLazyLoad,handleLoad,lazyload]);return(0,react.useEffect)((()=>(initObserver(),()=>{null!==observer.current&&observer.current.disconnect()})),[initObserver,observer]),(0,react.useEffect)((()=>{setLoaded(!1),setImageSrc(placeholderSrc(width,height)),initObserver()}),[height,initObserver,src,width]),(0,react.useEffect)((()=>{Boolean(observer.current)||initObserver()}),[initObserver,lazyload,observer]),(0,jsx_runtime.jsxs)(Container,{rounded,...props,role:"img","aria-label":alt,children:[(0,jsx_runtime.jsx)(Placeholder,{src:placeholderSrc(width,height),"aria-hidden":"true",alt:"Placeholder image",show:loaded}),(0,jsx_runtime.jsx)(StyledImage,{src:imageSrc,ref:imageRef,show:loaded,alt})]})};Image_Image.displayName="Image"}}]);
//# sourceMappingURL=6924.edb1770e.iframe.bundle.js.map